<?xml version="1.0"?>
<root main_tree_to_execute="BehaviorTree" BTCPP_format="4">
    <!-- ////////// -->
    <BehaviorTree ID="BehaviorTree">
        <Sequence>
            <SetBlackboard output_key="DoorLocation" value="0;0" />
	        <CheckNode node="/findperson_action_server"/>
            <Action ID="Talk" speech="Hello. I am the robot from Team AndesRobot. I will demonstrate navigation,
             speech and social interaction. I will welcome the people entering this home and help them get seated."/>
	        <Action ID="MoveTo" location="{DoorLocation}"/>
	        <RetryUntilSuccessful num_attempts="-1">
		        <Action ID="See" object="Person" cardinality="1"/>
	        </RetryUntilSuccessful>
            <Action ID="Ask" speech="Hello. What is your name?" response="{person1}"/>
            <Script code=" greeting:='Nice to meet you, '+person1+'. I will remember your name. You may seat here,
            please follow me.' " />
            <Action ID="Talk" speech="{greeting}"/>
            <Action ID="Ask" speech="What is your favorite drink?" response="{drink1}"/>
            <Script code=" offering:='Perfect, I will remember that you like '+drink1+'.' " />
            <Action ID="Talk" speech="{offering}"/>
            <Script code=" offering='This is your seat. Please take a seat, '+person1+'. I have stored your name.' " />
            <Action ID="Talk" speech="{offering}"/>
            <Action ID="Remember" object="Person"/>
        </Sequence>
    </BehaviorTree>
    <!-- ////////// -->
    <TreeNodesModel>
        <Action ID="Ask">
            <input_port default="What is your name?" name="speech"/>
            <output_port name="response"/>
        </Action>
        <Action ID="Talk">
            <input_port default="Hello" name="speech"/>
        </Action>
        <Action ID="MoveTo">
            <input_port default="DoorLocation" name="location"/>
        </Action>
        <Action ID="Remember">
            <input_port default="Person" name="object"/>
        </Action>
        <Action ID="See">
            <input_port default="Person" name="object"/>
        </Action>
    </TreeNodesModel>
    <!-- ////////// -->
</root>
